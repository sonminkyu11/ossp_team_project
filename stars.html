<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
		crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">

    <title>Stars</title>
</head>

<body>
    
    <div style="display: flex; flex-direction: row; height: 1400px; max-width: 1100;margin-left: 50px; margin-top: 100px;">
        <div class="container text-left">                        
            <img src="image.png"  width="350"  style="margin: 30px; margin-bottom: 0px;">
            <div id="template1" width="100"  style="margin: 30px;">
                <div class="task p-1 rounded-2 ps-2 d-flex align-items-center"></div>
            </div>           
        </div>
        <div class="container text-left">            
            <img src="image.png"  width="350"  style="margin: 30px; margin-bottom: 0px;">
            <div id="template2" width="1000"  style="margin: 30px;">
                <div class="task p-1 rounded-2 ps-2 d-flex align-items-center"></div>
            </div>           
        </div>
        <div class="container text-left">            
            <img src="image.png"  width="350"  style="margin: 30px; margin-bottom: 0px;">
            <div id="template3" width="100"  style="margin: 30px;">
                <div class="task p-1 rounded-2 ps-2 d-flex align-items-center"></div>
            </div>           
        </div>
    </div>


        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
            crossorigin="anonymous"></script>
        <script>
            const Type = {
                stars: 0,
                count: 0,
            };
    
            let tasks = [];
    
            function loadTasks() {
                let lastTasks = localStorage.getItem("tasks");
                if (!lastTasks) return;
    
                tasks = JSON.parse(lastTasks);
                tasks.forEach(addToList);
            }
    
            function saveTasks() {
                localStorage.setItem("tasks", JSON.stringify(tasks));
            }
    
            function addToList(task) {
                let div = document.createElement("div");
                div.className = "task p-1 rounded-2 ps-2 d-flex align-items-center";
    
                let text = document.createElement("div")
                let button1 = document.createElement("button");
                let button2 = document.createElement("button");
                let button3 = document.createElement("button");
                let button4 = document.createElement("button");
                let button5 = document.createElement("button");
                
                text.className = "ms-5";
                text.innerHTML = "<br>"
                button1.className = "btn btn-sm btn me-1";
                button1.innerHTML = '<i class="bi bi-1-circle-fill"></i>';
                button2.className = "btn btn-sm btn me-1";
                button2.innerHTML = '<i class="bi bi-2-circle-fill"></i>';
                button3.className = "btn btn-sm btn me-1";
                button3.innerHTML = '<i class="bi bi-3-circle-fill"></i>';
                button4.className = "btn btn-sm btn me-1";
                button4.innerHTML = '<i class="bi bi-4-circle-fill"></i>';
                button5.className = "btn btn-sm btn me-1";
                button5.innerHTML = '<i class="bi bi-5-circle-fill"></i>';
                div.appendChild(button1);
                div.appendChild(button2);
                div.appendChild(button3);
                div.appendChild(button4);
                div.appendChild(button5);
                button1.addEventListener("click", () => {
					task.count = task.count+1;
                    task.stars = task.stars +1
                    task.star = task.stars/task.count
                    saveTasks();
                    location.reload();
				});
                button2.addEventListener("click", () => {
					task.count = task.count+1;
                    task.stars = task.stars +2
                    task.star = task.stars/task.count
                    saveTasks();
                    location.reload();
				});
    
                button3.addEventListener("click", () => {
					task.count = task.count+1;
                    task.stars = task.stars +3
                    task.star = task.stars/task.count
                    saveTasks();
                    location.reload();
				});
    
                button4.addEventListener("click", () => {
					task.count = task.count+1;
                    task.stars = task.stars +4
                    task.star = task.stars/task.count
                    saveTasks();
                    location.reload();
				});
    
                button5.addEventListener("click", () => {
					task.count = task.count+1;
                    task.stars = task.stars +5
                    task.star = task.stars/task.count
                    saveTasks();
                    location.reload();
				});
                text.textContent = "별점 : "+task.star
                
                div.appendChild(text);
                let list = document.querySelector("#template"+task.template);
                list.appendChild(div);
            }
            window.addEventListener("load", () => {
               
                loadTasks(); 
            });
            if(localStorage.getItem("tasks")==='[]'){
            for(let i = 1;i<4;i++){
            console.log("hi");
            let task = {
                stars: 0,
                count: 0,
                star:0,
                template:i
            };			
            tasks.push(task);
            saveTasks();
            }}
            </script>
    
</body>

</html>